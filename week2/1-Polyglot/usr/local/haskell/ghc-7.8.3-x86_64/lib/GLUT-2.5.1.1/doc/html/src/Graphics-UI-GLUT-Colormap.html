<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>Graphics/UI/GLUT/Colormap.hs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
<pre><a name="line-1"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-2"></a><span class='hs-comment'>-- |</span>
<a name="line-3"></a><span class='hs-comment'>-- Module      :  Graphics.UI.GLUT.Colormap</span>
<a name="line-4"></a><span class='hs-comment'>-- Copyright   :  (c) Sven Panne 2002-2013</span>
<a name="line-5"></a><span class='hs-comment'>-- License     :  BSD3</span>
<a name="line-6"></a><span class='hs-comment'>--</span>
<a name="line-7"></a><span class='hs-comment'>-- Maintainer  :  Sven Panne &lt;svenpanne@gmail.com&gt;</span>
<a name="line-8"></a><span class='hs-comment'>-- Stability   :  stable</span>
<a name="line-9"></a><span class='hs-comment'>-- Portability :  portable</span>
<a name="line-10"></a><span class='hs-comment'>--</span>
<a name="line-11"></a><span class='hs-comment'>-- OpenGL supports both RGBA and color index rendering. The RGBA mode is</span>
<a name="line-12"></a><span class='hs-comment'>-- generally preferable to color index because more OpenGL rendering</span>
<a name="line-13"></a><span class='hs-comment'>-- capabilities are available and color index mode requires the loading of</span>
<a name="line-14"></a><span class='hs-comment'>-- colormap entries.</span>
<a name="line-15"></a><span class='hs-comment'>--</span>
<a name="line-16"></a><span class='hs-comment'>-- The GLUT color index state variables are used to read and write entries in a</span>
<a name="line-17"></a><span class='hs-comment'>-- window\'s color index colormap. Every GLUT color index window has its own</span>
<a name="line-18"></a><span class='hs-comment'>-- logical color index colormap. The size of a window\'s colormap can be</span>
<a name="line-19"></a><span class='hs-comment'>-- determined by reading 'numColorMapEntries'.</span>
<a name="line-20"></a><span class='hs-comment'>--</span>
<a name="line-21"></a><span class='hs-comment'>-- GLUT color index windows within a program can attempt to share colormap</span>
<a name="line-22"></a><span class='hs-comment'>-- resources by copying a single color index colormap to multiple windows using</span>
<a name="line-23"></a><span class='hs-comment'>-- 'copyColormap'. If possible GLUT will attempt to share the actual colormap.</span>
<a name="line-24"></a><span class='hs-comment'>-- While copying colormaps using 'copyColormap' can potentially allow sharing of</span>
<a name="line-25"></a><span class='hs-comment'>-- physical colormap resources, logically each window has its own colormap. So</span>
<a name="line-26"></a><span class='hs-comment'>-- changing a copied colormap of a window will force the duplication of the</span>
<a name="line-27"></a><span class='hs-comment'>-- colormap. For this reason, color index programs should generally load a</span>
<a name="line-28"></a><span class='hs-comment'>-- single color index colormap, copy it to all color index windows within the</span>
<a name="line-29"></a><span class='hs-comment'>-- program, and then not modify any colormap cells.</span>
<a name="line-30"></a><span class='hs-comment'>--</span>
<a name="line-31"></a><span class='hs-comment'>-- Use of multiple colormaps is likely to result in colormap installation</span>
<a name="line-32"></a><span class='hs-comment'>-- problems where some windows are displayed with an incorrect colormap due to</span>
<a name="line-33"></a><span class='hs-comment'>-- limitations on colormap resources.</span>
<a name="line-34"></a><span class='hs-comment'>--</span>
<a name="line-35"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-36"></a>
<a name="line-37"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>UI</span><span class='hs-varop'>.</span><span class='hs-conid'>GLUT</span><span class='hs-varop'>.</span><span class='hs-conid'>Colormap</span> <span class='hs-layout'>(</span>
<a name="line-38"></a>   <span class='hs-varid'>colorMapEntry</span><span class='hs-layout'>,</span>
<a name="line-39"></a>   <span class='hs-varid'>copyColormap</span><span class='hs-layout'>,</span>
<a name="line-40"></a>   <span class='hs-varid'>numColorMapEntries</span><span class='hs-layout'>,</span>
<a name="line-41"></a>   <span class='hs-varid'>transparentIndex</span>
<a name="line-42"></a><span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-43"></a>
<a name="line-44"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Foreign</span><span class='hs-varop'>.</span><span class='hs-conid'>C</span><span class='hs-varop'>.</span><span class='hs-conid'>Types</span>
<a name="line-45"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>Rendering</span><span class='hs-varop'>.</span><span class='hs-conid'>OpenGL</span> <span class='hs-layout'>(</span> <span class='hs-conid'>GLfloat</span><span class='hs-layout'>,</span> <span class='hs-conid'>GLint</span><span class='hs-layout'>,</span> <span class='hs-conid'>Color3</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> <span class='hs-conid'>Index1</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span>
<a name="line-46"></a>                                 <span class='hs-layout'>,</span> <span class='hs-conid'>StateVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>makeStateVar</span><span class='hs-layout'>,</span> <span class='hs-conid'>GettableStateVar</span>
<a name="line-47"></a>                                 <span class='hs-layout'>,</span> <span class='hs-varid'>makeGettableStateVar</span> <span class='hs-layout'>)</span>
<a name="line-48"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>UI</span><span class='hs-varop'>.</span><span class='hs-conid'>GLUT</span><span class='hs-varop'>.</span><span class='hs-conid'>QueryUtils</span>
<a name="line-49"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>UI</span><span class='hs-varop'>.</span><span class='hs-conid'>GLUT</span><span class='hs-varop'>.</span><span class='hs-conid'>Raw</span>
<a name="line-50"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Graphics</span><span class='hs-varop'>.</span><span class='hs-conid'>UI</span><span class='hs-varop'>.</span><span class='hs-conid'>GLUT</span><span class='hs-varop'>.</span><span class='hs-conid'>Types</span>
<a name="line-51"></a>
<a name="line-52"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-53"></a>
<a name="line-54"></a><span class='hs-comment'>-- | Controls the color index colormap entry of the /current window/\'s logical</span>
<a name="line-55"></a><span class='hs-comment'>-- colormap for the /layer in use/. The /layer in use/ of the /current window/</span>
<a name="line-56"></a><span class='hs-comment'>-- should be a color index window. The color index should be zero or greater and</span>
<a name="line-57"></a><span class='hs-comment'>-- less than the total number of colormap entries for the window (see</span>
<a name="line-58"></a><span class='hs-comment'>-- 'numColorMapEntries') and different from an overlay\'s transparent index (see</span>
<a name="line-59"></a><span class='hs-comment'>-- 'transparentIndex').</span>
<a name="line-60"></a><span class='hs-comment'>--</span>
<a name="line-61"></a><span class='hs-comment'>-- If the /layer in use/\'s colormap was copied by reference, setting a colormap</span>
<a name="line-62"></a><span class='hs-comment'>-- entry will force the duplication of the colormap.</span>
<a name="line-63"></a>
<a name="line-64"></a><a name="colorMapEntry"></a><span class='hs-definition'>colorMapEntry</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Index1</span> <span class='hs-conid'>GLint</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>StateVar</span> <span class='hs-layout'>(</span><span class='hs-conid'>Color3</span> <span class='hs-conid'>GLfloat</span><span class='hs-layout'>)</span>
<a name="line-65"></a><span class='hs-definition'>colorMapEntry</span> <span class='hs-layout'>(</span><span class='hs-conid'>Index1</span> <span class='hs-varid'>cell</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span>
<a name="line-66"></a>   <span class='hs-varid'>makeStateVar</span> <span class='hs-layout'>(</span><span class='hs-varid'>getColorMapEntry</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromIntegral</span> <span class='hs-varid'>cell</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-67"></a>                <span class='hs-layout'>(</span><span class='hs-varid'>setColorMapEntry</span> <span class='hs-layout'>(</span><span class='hs-varid'>fromIntegral</span> <span class='hs-varid'>cell</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-68"></a>
<a name="line-69"></a><a name="setColorMapEntry"></a><span class='hs-definition'>setColorMapEntry</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>CInt</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Color3</span> <span class='hs-conid'>GLfloat</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-70"></a><span class='hs-definition'>setColorMapEntry</span> <span class='hs-varid'>cell</span> <span class='hs-layout'>(</span><span class='hs-conid'>Color3</span> <span class='hs-varid'>r</span> <span class='hs-varid'>g</span> <span class='hs-varid'>b</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>glutSetColor</span> <span class='hs-varid'>cell</span> <span class='hs-varid'>r</span> <span class='hs-varid'>g</span> <span class='hs-varid'>b</span>
<a name="line-71"></a>
<a name="line-72"></a><a name="getColorMapEntry"></a><span class='hs-definition'>getColorMapEntry</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>CInt</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-layout'>(</span><span class='hs-conid'>Color3</span> <span class='hs-conid'>GLfloat</span><span class='hs-layout'>)</span>
<a name="line-73"></a><span class='hs-definition'>getColorMapEntry</span> <span class='hs-varid'>cell</span> <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span>
<a name="line-74"></a>   <span class='hs-varid'>r</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>glutGetColor</span> <span class='hs-varid'>cell</span> <span class='hs-varid'>glut_RED</span>
<a name="line-75"></a>   <span class='hs-varid'>g</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>glutGetColor</span> <span class='hs-varid'>cell</span> <span class='hs-varid'>glut_GREEN</span>
<a name="line-76"></a>   <span class='hs-varid'>b</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>glutGetColor</span> <span class='hs-varid'>cell</span> <span class='hs-varid'>glut_BLUE</span>
<a name="line-77"></a>   <span class='hs-varid'>return</span> <span class='hs-varop'>$</span> <span class='hs-conid'>Color3</span> <span class='hs-varid'>r</span> <span class='hs-varid'>g</span> <span class='hs-varid'>b</span>
<a name="line-78"></a>
<a name="line-79"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-80"></a>
<a name="line-81"></a><span class='hs-comment'>-- | Copy (lazily if possible to promote sharing) the logical colormap from a</span>
<a name="line-82"></a><span class='hs-comment'>-- specified window to the /current window/\'s /layer in use/. The copy will be</span>
<a name="line-83"></a><span class='hs-comment'>-- from the normal plane to the normal plane; or from the overlay to the overlay</span>
<a name="line-84"></a><span class='hs-comment'>-- (never across different layers). Once a colormap has been copied, avoid</span>
<a name="line-85"></a><span class='hs-comment'>-- setting cells in the colormap via 'colorMapEntry' since that will force an</span>
<a name="line-86"></a><span class='hs-comment'>-- actual copy of the colormap if it was previously copied by reference.</span>
<a name="line-87"></a><span class='hs-comment'>-- 'copyColormap' should only be called when both the /current window/ and the</span>
<a name="line-88"></a><span class='hs-comment'>-- specified window are color index windows.</span>
<a name="line-89"></a>
<a name="line-90"></a><a name="copyColormap"></a><span class='hs-definition'>copyColormap</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Window</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IO</span> <span class='hs-conid'>()</span>
<a name="line-91"></a><span class='hs-definition'>copyColormap</span> <span class='hs-layout'>(</span><span class='hs-conid'>Window</span> <span class='hs-varid'>win</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>glutCopyColormap</span> <span class='hs-varid'>win</span>
<a name="line-92"></a>
<a name="line-93"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-94"></a>
<a name="line-95"></a><span class='hs-comment'>-- | Contains the number of entries in the colormap of the /current window/\'s</span>
<a name="line-96"></a><span class='hs-comment'>-- current layer (0 in RGBA mode).</span>
<a name="line-97"></a>
<a name="line-98"></a><a name="numColorMapEntries"></a><span class='hs-definition'>numColorMapEntries</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>GettableStateVar</span> <span class='hs-conid'>GLint</span>
<a name="line-99"></a><span class='hs-definition'>numColorMapEntries</span> <span class='hs-keyglyph'>=</span>
<a name="line-100"></a>   <span class='hs-varid'>makeGettableStateVar</span> <span class='hs-varop'>$</span> <span class='hs-varid'>simpleGet</span> <span class='hs-varid'>fromIntegral</span> <span class='hs-varid'>glut_WINDOW_COLORMAP_SIZE</span>
<a name="line-101"></a>
<a name="line-102"></a><span class='hs-comment'>--------------------------------------------------------------------------------</span>
<a name="line-103"></a>
<a name="line-104"></a><span class='hs-comment'>-- | Contains the transparent color index of the overlay of the /current window/</span>
<a name="line-105"></a><span class='hs-comment'>-- or -1 if no overlay is in use.</span>
<a name="line-106"></a>
<a name="line-107"></a><a name="transparentIndex"></a><span class='hs-definition'>transparentIndex</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>GettableStateVar</span> <span class='hs-layout'>(</span><span class='hs-conid'>Index1</span> <span class='hs-conid'>GLint</span><span class='hs-layout'>)</span>
<a name="line-108"></a><span class='hs-definition'>transparentIndex</span> <span class='hs-keyglyph'>=</span>
<a name="line-109"></a>   <span class='hs-varid'>makeGettableStateVar</span> <span class='hs-varop'>$</span>
<a name="line-110"></a>      <span class='hs-varid'>layerGet</span> <span class='hs-layout'>(</span><span class='hs-conid'>Index1</span> <span class='hs-varop'>.</span> <span class='hs-varid'>fromIntegral</span><span class='hs-layout'>)</span> <span class='hs-varid'>glut_TRANSPARENT_INDEX</span>
</pre></body>
</html>
