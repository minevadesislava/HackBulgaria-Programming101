<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>10.4. Primitive Module</title><link rel="stylesheet" type="text/css" href="fptools.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="The Glorious Glasgow Haskell Compilation System User's Guide, Version 7.8.3"><link rel="up" href="an-external-representation-for-the-ghc-core-language-for-ghc-6.10.html" title="Chapter 10. An External Representation for the GHC Core Language (For GHC 6.10)"><link rel="prev" href="informal-semantics.html" title="10.3. Informal Semantics"><link rel="next" href="wrong.html" title="Chapter 11. What to do when something goes wrong"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.4. Primitive Module</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="informal-semantics.html">Prev</a> </td><th width="60%" align="center">Chapter 10. An External Representation for the GHC Core Language (For GHC 6.10)</th><td width="20%" align="right"> <a accesskey="n" href="wrong.html">Next</a></td></tr></table><hr></div><div class="section" title="10.4. Primitive Module"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="primitive-module"></a>10.4. Primitive Module</h2></div></div></div><p>The semantics of External Core rely on the contents and informal
    semantics of the primitive module <code class="code">ghc-prim:GHC.Prim</code>. Nearly all
    the primitives are required in order to cover GHC&#8217;s implementation
    of the Haskell98 standard prelude; the only operators that can be
    completely omitted are those supporting the byte-code interpreter,
    parallelism, and foreign objects. Some of the concurrency
    primitives are needed, but can be given degenerate implementations
    if it desired to target a purely sequential backend (see Section
    <a class="link" href="primitive-module.html#non-concurrent-back-end" title="10.4.1. Non-concurrent Back End">the Non-concurrent Back End section</a>).</p><p>In addition to these primitives, a large number of C library
    functions are required to implement the full standard Prelude,
    particularly to handle I/O and arithmetic on less usual types.</p><p>For a full listing of the names and types of the primitive
    operators, see the GHC library documentation [<a class="citation" href="an-external-representation-for-the-ghc-core-language-for-ghc-6.10.html#idp33624048"><span class="citation">ghcprim</span></a>].</p><div class="section" title="10.4.1. Non-concurrent Back End"><div class="titlepage"><div><div><h3 class="title"><a name="non-concurrent-back-end"></a>10.4.1. Non-concurrent Back End</h3></div></div></div><p>The Haskell98 standard prelude doesn&#8217;t include any concurrency
      support, but GHC&#8217;s implementation of it relies on the existence
      of some concurrency primitives. However, it never actually forks
      multiple threads. Hence, the concurrency primitives can be given
      degenerate implementations that will work in a non-concurrent
      setting, as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="code">ThreadIdzh</code> can be represented by a singleton type, whose
	  (unique) value is returned by <code class="code">myThreadIdzh</code>.
        </li><li class="listitem"><code class="code">forkzh</code> can just die with an <span class="quote">&#8220;<span class="quote">unimplemented</span>&#8221;</span> message.
        </li><li class="listitem"><code class="code">killThreadzh</code> and <code class="code">yieldzh</code> can also just die <span class="quote">&#8220;<span class="quote">unimplemented</span>&#8221;</span>
	  since in a one-thread world, the only thread a thread can
	  kill is itself, and if a thread yields the program hangs.
        </li><li class="listitem"><code class="code">MVarzh a</code> can be represented by <code class="code">MutVarzh (Maybe a)</code>; where a
	  concurrent implementation would block, the sequential
	  implementation can just die with a suitable message (since
	  no other thread exists to unblock it).
        </li><li class="listitem"><code class="code">waitReadzh</code> and <code class="code">waitWritezh</code> can be implemented using a <code class="code">select</code>
	  with no timeout.
        </li></ul></div></div><div class="section" title="10.4.2. Literals"><div class="titlepage"><div><div><h3 class="title"><a name="literals"></a>10.4.2. Literals</h3></div></div></div><p>Only the following combination of literal forms and types are
      permitted:</p><div class="informaltable"><table border="0"><colgroup><col align="left" class="literal"><col align="left" class="type"><col align="left" class="description"></colgroup><thead><tr><th align="left">Literal form</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td rowspan="4" align="left" valign="top">integer</td><td align="left"><code class="code">Intzh</code></td><td align="left">Int</td></tr><tr><td align="left"><code class="code">Wordzh</code></td><td align="left">Word</td></tr><tr><td align="left"><code class="code">Addrzh</code></td><td align="left">Address</td></tr><tr><td align="left"><code class="code">Charzh</code></td><td align="left">Unicode character code</td></tr><tr><td rowspan="2" align="left" valign="top">rational</td><td align="left"><code class="code">Floatzh</code></td><td align="left">Float</td></tr><tr><td align="left"><code class="code">Doublezh</code></td><td align="left">Double</td></tr><tr><td align="left">character</td><td align="left"><code class="code">Charzh</code></td><td align="left">Unicode character specified by ASCII character</td></tr><tr><td align="left">string</td><td align="left"><code class="code">Addrzh</code></td><td align="left">Address of specified C-format string</td></tr></tbody></table></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="informal-semantics.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="an-external-representation-for-the-ghc-core-language-for-ghc-6.10.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="wrong.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">10.3. Informal Semantics </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 11. What to do when something goes wrong</td></tr></table></div></body></html>
