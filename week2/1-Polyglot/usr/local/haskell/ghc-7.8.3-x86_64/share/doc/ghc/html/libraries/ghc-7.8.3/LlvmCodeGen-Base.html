<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>LlvmCodeGen.Base</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_LlvmCodeGen-Base.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/LlvmCodeGen-Base.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghc-7.8.3: The GHC API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">LlvmCodeGen.Base</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Base LLVM Code Generation module</p><p>Contains functions useful through out the code generator.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:LlvmCmmDecl">LlvmCmmDecl</a> = <a href="Cmm.html#t:GenCmmDecl">GenCmmDecl</a> [<a href="LlvmCodeGen-Base.html#t:LlvmData">LlvmData</a>] (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Cmm.html#t:CmmStatics">CmmStatics</a>) (<a href="Cmm.html#t:ListGraph">ListGraph</a> <a href="Llvm-AbsSyn.html#t:LlvmStatement">LlvmStatement</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:LlvmBasicBlock">LlvmBasicBlock</a> = <a href="Cmm.html#t:GenBasicBlock">GenBasicBlock</a> <a href="Llvm-AbsSyn.html#t:LlvmStatement">LlvmStatement</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:LiveGlobalRegs">LiveGlobalRegs</a> = [<a href="CmmExpr.html#t:GlobalReg">GlobalReg</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:LlvmUnresData">LlvmUnresData</a> = (<a href="CLabel.html#t:CLabel">CLabel</a>, <a href="Cmm.html#t:Section">Section</a>, <a href="Llvm-Types.html#t:LlvmType">LlvmType</a>, [<a href="LlvmCodeGen-Base.html#t:UnresStatic">UnresStatic</a>])</li><li class="src short"><span class="keyword">type</span> <a href="#t:LlvmData">LlvmData</a> = ([<a href="Llvm-Types.html#t:LMGlobal">LMGlobal</a>], [<a href="Llvm-Types.html#t:LlvmType">LlvmType</a>])</li><li class="src short"><span class="keyword">type</span> <a href="#t:UnresLabel">UnresLabel</a> = <a href="CmmExpr.html#t:CmmLit">CmmLit</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:UnresStatic">UnresStatic</a> = <a href="../base-4.7.0.1/Data-Either.html#t:Either">Either</a> <a href="LlvmCodeGen-Base.html#t:UnresLabel">UnresLabel</a> <a href="Llvm-Types.html#t:LlvmStatic">LlvmStatic</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:LlvmVersion">LlvmVersion</a> = <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:defaultLlvmVersion">defaultLlvmVersion</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a></li><li class="src short"><a href="#v:minSupportLlvmVersion">minSupportLlvmVersion</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a></li><li class="src short"><a href="#v:maxSupportLlvmVersion">maxSupportLlvmVersion</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LlvmM">LlvmM</a> a</li><li class="src short"><a href="#v:runLlvm">runLlvm</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a> -&gt; <a href="BufWrite.html#t:BufHandle">BufHandle</a> -&gt; <a href="UniqSupply.html#t:UniqSupply">UniqSupply</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () -&gt; <a href="../base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:liftStream">liftStream</a> ::  <a href="Stream.html#t:Stream">Stream</a> <a href="../base-4.7.0.1/System-IO.html#t:IO">IO</a> a x -&gt; <a href="Stream.html#t:Stream">Stream</a> <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a x</li><li class="src short"><a href="#v:withClearVars">withClearVars</a> ::  <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a</li><li class="src short"><a href="#v:varLookup">varLookup</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Llvm-Types.html#t:LlvmType">LlvmType</a>)</li><li class="src short"><a href="#v:varInsert">varInsert</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:markStackReg">markStackReg</a> :: <a href="CmmExpr.html#t:GlobalReg">GlobalReg</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:checkStackReg">checkStackReg</a> :: <a href="CmmExpr.html#t:GlobalReg">GlobalReg</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="../base-4.7.0.1/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:funLookup">funLookup</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Llvm-Types.html#t:LlvmType">LlvmType</a>)</li><li class="src short"><a href="#v:funInsert">funInsert</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:getLlvmVer">getLlvmVer</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a></li><li class="src short"><a href="#v:getDynFlags">getDynFlags</a> :: <a href="DynFlags.html#t:HasDynFlags">HasDynFlags</a> m =&gt; m <a href="DynFlags.html#t:DynFlags">DynFlags</a></li><li class="src short"><a href="#v:getDynFlag">getDynFlag</a> ::  (<a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; a) -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a</li><li class="src short"><a href="#v:getLlvmPlatform">getLlvmPlatform</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Platform.html#t:Platform">Platform</a></li><li class="src short"><a href="#v:dumpIfSetLlvm">dumpIfSetLlvm</a> :: <a href="DynFlags.html#t:DumpFlag">DumpFlag</a> -&gt; <a href="../base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:renderLlvm">renderLlvm</a> :: <a href="Outputable.html#t:SDoc">SDoc</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:runUs">runUs</a> ::  <a href="UniqSupply.html#t:UniqSM">UniqSM</a> a -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a</li><li class="src short"><a href="#v:markUsedVar">markUsedVar</a> :: <a href="Llvm-Types.html#t:LlvmVar">LlvmVar</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:getUsedVars">getUsedVars</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> [<a href="Llvm-Types.html#t:LlvmVar">LlvmVar</a>]</li><li class="src short"><a href="#v:ghcInternalFunctions">ghcInternalFunctions</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:getMetaUniqueId">getMetaUniqueId</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:setUniqMeta">setUniqMeta</a> :: <a href="Unique.html#t:Unique">Unique</a> -&gt; <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ()</li><li class="src short"><a href="#v:getUniqMeta">getUniqMeta</a> :: <a href="Unique.html#t:Unique">Unique</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a>)</li><li class="src short"><a href="#v:freshSectionId">freshSectionId</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:cmmToLlvmType">cmmToLlvmType</a> :: <a href="CmmType.html#t:CmmType">CmmType</a> -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a></li><li class="src short"><a href="#v:widthToLlvmFloat">widthToLlvmFloat</a> :: <a href="CmmType.html#t:Width">Width</a> -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a></li><li class="src short"><a href="#v:widthToLlvmInt">widthToLlvmInt</a> :: <a href="CmmType.html#t:Width">Width</a> -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a></li><li class="src short"><a href="#v:llvmFunTy">llvmFunTy</a> :: <a href="LlvmCodeGen-Base.html#t:LiveGlobalRegs">LiveGlobalRegs</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LlvmType">LlvmType</a></li><li class="src short"><a href="#v:llvmFunSig">llvmFunSig</a> :: <a href="LlvmCodeGen-Base.html#t:LiveGlobalRegs">LiveGlobalRegs</a> -&gt; <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="Llvm-Types.html#t:LlvmLinkageType">LlvmLinkageType</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LlvmFunctionDecl">LlvmFunctionDecl</a></li><li class="src short"><a href="#v:llvmStdFunAttrs">llvmStdFunAttrs</a> :: [<a href="Llvm-Types.html#t:LlvmFuncAttr">LlvmFuncAttr</a>]</li><li class="src short"><a href="#v:llvmFunAlign">llvmFunAlign</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="Llvm-Types.html#t:LMAlign">LMAlign</a></li><li class="src short"><a href="#v:llvmInfAlign">llvmInfAlign</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="Llvm-Types.html#t:LMAlign">LMAlign</a></li><li class="src short"><a href="#v:llvmPtrBits">llvmPtrBits</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:mkLlvmFunc">mkLlvmFunc</a> :: <a href="LlvmCodeGen-Base.html#t:LiveGlobalRegs">LiveGlobalRegs</a> -&gt; <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="Llvm-Types.html#t:LlvmLinkageType">LlvmLinkageType</a> -&gt; <a href="Llvm-Types.html#t:LMSection">LMSection</a> -&gt; <a href="Llvm-AbsSyn.html#t:LlvmBlocks">LlvmBlocks</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-AbsSyn.html#t:LlvmFunction">LlvmFunction</a></li><li class="src short"><a href="#v:tysToParams">tysToParams</a> :: [<a href="Llvm-Types.html#t:LlvmType">LlvmType</a>] -&gt; [<a href="Llvm-Types.html#t:LlvmParameter">LlvmParameter</a>]</li><li class="src short"><a href="#v:strCLabel_llvm">strCLabel_llvm</a> :: <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LMString">LMString</a></li><li class="src short"><a href="#v:strDisplayName_llvm">strDisplayName_llvm</a> :: <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LMString">LMString</a></li><li class="src short"><a href="#v:strProcedureName_llvm">strProcedureName_llvm</a> :: <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LMString">LMString</a></li><li class="src short"><a href="#v:getGlobalPtr">getGlobalPtr</a> :: <a href="Llvm-Types.html#t:LMString">LMString</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LlvmVar">LlvmVar</a></li><li class="src short"><a href="#v:generateAliases">generateAliases</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ([<a href="Llvm-Types.html#t:LMGlobal">LMGlobal</a>], [<a href="Llvm-Types.html#t:LlvmType">LlvmType</a>])</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:LlvmCmmDecl" class="def">LlvmCmmDecl</a> = <a href="Cmm.html#t:GenCmmDecl">GenCmmDecl</a> [<a href="LlvmCodeGen-Base.html#t:LlvmData">LlvmData</a>] (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Cmm.html#t:CmmStatics">CmmStatics</a>) (<a href="Cmm.html#t:ListGraph">ListGraph</a> <a href="Llvm-AbsSyn.html#t:LlvmStatement">LlvmStatement</a>) <a href="src/LlvmCodeGen-Base.html#LlvmCmmDecl" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:LlvmBasicBlock" class="def">LlvmBasicBlock</a> = <a href="Cmm.html#t:GenBasicBlock">GenBasicBlock</a> <a href="Llvm-AbsSyn.html#t:LlvmStatement">LlvmStatement</a> <a href="src/LlvmCodeGen-Base.html#LlvmBasicBlock" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:LiveGlobalRegs" class="def">LiveGlobalRegs</a> = [<a href="CmmExpr.html#t:GlobalReg">GlobalReg</a>] <a href="src/LlvmCodeGen-Base.html#LiveGlobalRegs" class="link">Source</a></p><div class="doc"><p>Global registers live on proc entry</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:LlvmUnresData" class="def">LlvmUnresData</a> = (<a href="CLabel.html#t:CLabel">CLabel</a>, <a href="Cmm.html#t:Section">Section</a>, <a href="Llvm-Types.html#t:LlvmType">LlvmType</a>, [<a href="LlvmCodeGen-Base.html#t:UnresStatic">UnresStatic</a>]) <a href="src/LlvmCodeGen-Base.html#LlvmUnresData" class="link">Source</a></p><div class="doc"><p>Unresolved code.
 Of the form: (data label, data type, unresolved data)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:LlvmData" class="def">LlvmData</a> = ([<a href="Llvm-Types.html#t:LMGlobal">LMGlobal</a>], [<a href="Llvm-Types.html#t:LlvmType">LlvmType</a>]) <a href="src/LlvmCodeGen-Base.html#LlvmData" class="link">Source</a></p><div class="doc"><p>Top level LLVM Data (globals and type aliases)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:UnresLabel" class="def">UnresLabel</a> = <a href="CmmExpr.html#t:CmmLit">CmmLit</a> <a href="src/LlvmCodeGen-Base.html#UnresLabel" class="link">Source</a></p><div class="doc"><p>An unresolved Label.</p><p>Labels are unresolved when we haven't yet determined if they are defined in
 the module we are currently compiling, or an external one.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:UnresStatic" class="def">UnresStatic</a> = <a href="../base-4.7.0.1/Data-Either.html#t:Either">Either</a> <a href="LlvmCodeGen-Base.html#t:UnresLabel">UnresLabel</a> <a href="Llvm-Types.html#t:LlvmStatic">LlvmStatic</a> <a href="src/LlvmCodeGen-Base.html#UnresStatic" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:LlvmVersion" class="def">LlvmVersion</a> = <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a> <a href="src/LlvmCodeGen-Base.html#LlvmVersion" class="link">Source</a></p><div class="doc"><p>LLVM Version Number</p></div></div><div class="top"><p class="src"><a name="v:defaultLlvmVersion" class="def">defaultLlvmVersion</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a> <a href="src/LlvmCodeGen-Base.html#defaultLlvmVersion" class="link">Source</a></p><div class="doc"><p>The LLVM Version we assume if we don't know</p></div></div><div class="top"><p class="src"><a name="v:minSupportLlvmVersion" class="def">minSupportLlvmVersion</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a> <a href="src/LlvmCodeGen-Base.html#minSupportLlvmVersion" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:maxSupportLlvmVersion" class="def">maxSupportLlvmVersion</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a> <a href="src/LlvmCodeGen-Base.html#maxSupportLlvmVersion" class="link">Source</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:LlvmM" class="def">LlvmM</a> a <a href="src/LlvmCodeGen-Base.html#LlvmM" class="link">Source</a></p><div class="doc"><p>The Llvm monad. Wraps <code>LlvmEnv</code> state as well as the <code>IO</code> monad</p></div><div class="subs instances"><p id="control.i:LlvmM" class="caption collapser" onclick="toggleSection('i:LlvmM')">Instances</p><div id="section.i:LlvmM" class="show"><table><tr><td class="src"><a href="../base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="../base-4.7.0.1/Control-Monad.html#t:Functor">Functor</a> <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="MonadUtils.html#t:Applicative">Applicative</a> <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="DynFlags.html#t:HasDynFlags">HasDynFlags</a> <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:runLlvm" class="def">runLlvm</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a> -&gt; <a href="BufWrite.html#t:BufHandle">BufHandle</a> -&gt; <a href="UniqSupply.html#t:UniqSupply">UniqSupply</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () -&gt; <a href="../base-4.7.0.1/System-IO.html#t:IO">IO</a> () <a href="src/LlvmCodeGen-Base.html#runLlvm" class="link">Source</a></p><div class="doc"><p>Get initial Llvm environment.</p></div></div><div class="top"><p class="src"><a name="v:liftStream" class="def">liftStream</a> ::  <a href="Stream.html#t:Stream">Stream</a> <a href="../base-4.7.0.1/System-IO.html#t:IO">IO</a> a x -&gt; <a href="Stream.html#t:Stream">Stream</a> <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a x <a href="src/LlvmCodeGen-Base.html#liftStream" class="link">Source</a></p><div class="doc"><p>Lift a stream into the LlvmM monad</p></div></div><div class="top"><p class="src"><a name="v:withClearVars" class="def">withClearVars</a> ::  <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a <a href="src/LlvmCodeGen-Base.html#withClearVars" class="link">Source</a></p><div class="doc"><p>Clear variables from the environment for a subcomputation</p></div></div><div class="top"><p class="src"><a name="v:varLookup" class="def">varLookup</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Llvm-Types.html#t:LlvmType">LlvmType</a>) <a href="src/LlvmCodeGen-Base.html#varLookup" class="link">Source</a></p><div class="doc"><p>Lookup variables or functions in the environment.</p></div></div><div class="top"><p class="src"><a name="v:varInsert" class="def">varInsert</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#varInsert" class="link">Source</a></p><div class="doc"><p>Insert variables or functions into the environment.</p></div></div><div class="top"><p class="src"><a name="v:markStackReg" class="def">markStackReg</a> :: <a href="CmmExpr.html#t:GlobalReg">GlobalReg</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#markStackReg" class="link">Source</a></p><div class="doc"><p>Set a register as allocated on the stack</p></div></div><div class="top"><p class="src"><a name="v:checkStackReg" class="def">checkStackReg</a> :: <a href="CmmExpr.html#t:GlobalReg">GlobalReg</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="../base-4.7.0.1/Data-Bool.html#t:Bool">Bool</a> <a href="src/LlvmCodeGen-Base.html#checkStackReg" class="link">Source</a></p><div class="doc"><p>Check whether a register is allocated on the stack</p></div></div><div class="top"><p class="src"><a name="v:funLookup" class="def">funLookup</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Llvm-Types.html#t:LlvmType">LlvmType</a>) <a href="src/LlvmCodeGen-Base.html#funLookup" class="link">Source</a></p><div class="doc"><p>Lookup variables or functions in the environment.</p></div></div><div class="top"><p class="src"><a name="v:funInsert" class="def">funInsert</a> :: <a href="Unique.html#t:Uniquable">Uniquable</a> key =&gt; key -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#funInsert" class="link">Source</a></p><div class="doc"><p>Insert variables or functions into the environment.</p></div></div><div class="top"><p class="src"><a name="v:getLlvmVer" class="def">getLlvmVer</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="LlvmCodeGen-Base.html#t:LlvmVersion">LlvmVersion</a> <a href="src/LlvmCodeGen-Base.html#getLlvmVer" class="link">Source</a></p><div class="doc"><p>Get the LLVM version we are generating code for</p></div></div><div class="top"><p class="src"><a name="v:getDynFlags" class="def">getDynFlags</a> :: <a href="DynFlags.html#t:HasDynFlags">HasDynFlags</a> m =&gt; m <a href="DynFlags.html#t:DynFlags">DynFlags</a> <a href="src/DynFlags.html#getDynFlags" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getDynFlag" class="def">getDynFlag</a> ::  (<a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; a) -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a <a href="src/LlvmCodeGen-Base.html#getDynFlag" class="link">Source</a></p><div class="doc"><p>Get the platform we are generating code for</p></div></div><div class="top"><p class="src"><a name="v:getLlvmPlatform" class="def">getLlvmPlatform</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Platform.html#t:Platform">Platform</a> <a href="src/LlvmCodeGen-Base.html#getLlvmPlatform" class="link">Source</a></p><div class="doc"><p>Get the platform we are generating code for</p></div></div><div class="top"><p class="src"><a name="v:dumpIfSetLlvm" class="def">dumpIfSetLlvm</a> :: <a href="DynFlags.html#t:DumpFlag">DumpFlag</a> -&gt; <a href="../base-4.7.0.1/Data-String.html#t:String">String</a> -&gt; <a href="Outputable.html#t:SDoc">SDoc</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#dumpIfSetLlvm" class="link">Source</a></p><div class="doc"><p>Dumps the document if the corresponding flag has been set by the user</p></div></div><div class="top"><p class="src"><a name="v:renderLlvm" class="def">renderLlvm</a> :: <a href="Outputable.html#t:SDoc">SDoc</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#renderLlvm" class="link">Source</a></p><div class="doc"><p>Prints the given contents to the output handle</p></div></div><div class="top"><p class="src"><a name="v:runUs" class="def">runUs</a> ::  <a href="UniqSupply.html#t:UniqSM">UniqSM</a> a -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> a <a href="src/LlvmCodeGen-Base.html#runUs" class="link">Source</a></p><div class="doc"><p>Run a <code>UniqSM</code> action with our unique supply</p></div></div><div class="top"><p class="src"><a name="v:markUsedVar" class="def">markUsedVar</a> :: <a href="Llvm-Types.html#t:LlvmVar">LlvmVar</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#markUsedVar" class="link">Source</a></p><div class="doc"><p>Marks a variable as &quot;used&quot;</p></div></div><div class="top"><p class="src"><a name="v:getUsedVars" class="def">getUsedVars</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> [<a href="Llvm-Types.html#t:LlvmVar">LlvmVar</a>] <a href="src/LlvmCodeGen-Base.html#getUsedVars" class="link">Source</a></p><div class="doc"><p>Return all variables marked as &quot;used&quot; so far</p></div></div><div class="top"><p class="src"><a name="v:ghcInternalFunctions" class="def">ghcInternalFunctions</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#ghcInternalFunctions" class="link">Source</a></p><div class="doc"><p>Here we pre-initialise some functions that are used internally by GHC
 so as to make sure they have the most general type in the case that
 user code also uses these functions but with a different type than GHC
 internally. (Main offender is treating return type as <code>void</code> instead of
 'void *'). Fixes trac #5486.</p></div></div><div class="top"><p class="src"><a name="v:getMetaUniqueId" class="def">getMetaUniqueId</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a> <a href="src/LlvmCodeGen-Base.html#getMetaUniqueId" class="link">Source</a></p><div class="doc"><p>Allocate a new global unnamed metadata identifier</p></div></div><div class="top"><p class="src"><a name="v:setUniqMeta" class="def">setUniqMeta</a> :: <a href="Unique.html#t:Unique">Unique</a> -&gt; <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> () <a href="src/LlvmCodeGen-Base.html#setUniqMeta" class="link">Source</a></p><div class="doc"><p>Sets metadata node for a given unique</p></div></div><div class="top"><p class="src"><a name="v:getUniqMeta" class="def">getUniqMeta</a> :: <a href="Unique.html#t:Unique">Unique</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> (<a href="../base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a>) <a href="src/LlvmCodeGen-Base.html#getUniqMeta" class="link">Source</a></p><div class="doc"><p>Gets metadata node for given unique</p></div></div><div class="top"><p class="src"><a name="v:freshSectionId" class="def">freshSectionId</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a> <a href="src/LlvmCodeGen-Base.html#freshSectionId" class="link">Source</a></p><div class="doc"><p>Returns a fresh section ID</p></div></div><div class="top"><p class="src"><a name="v:cmmToLlvmType" class="def">cmmToLlvmType</a> :: <a href="CmmType.html#t:CmmType">CmmType</a> -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> <a href="src/LlvmCodeGen-Base.html#cmmToLlvmType" class="link">Source</a></p><div class="doc"><p>Translate a basic CmmType to an LlvmType.</p></div></div><div class="top"><p class="src"><a name="v:widthToLlvmFloat" class="def">widthToLlvmFloat</a> :: <a href="CmmType.html#t:Width">Width</a> -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> <a href="src/LlvmCodeGen-Base.html#widthToLlvmFloat" class="link">Source</a></p><div class="doc"><p>Translate a Cmm Float Width to a LlvmType.</p></div></div><div class="top"><p class="src"><a name="v:widthToLlvmInt" class="def">widthToLlvmInt</a> :: <a href="CmmType.html#t:Width">Width</a> -&gt; <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> <a href="src/LlvmCodeGen-Base.html#widthToLlvmInt" class="link">Source</a></p><div class="doc"><p>Translate a Cmm Bit Width to a LlvmType.</p></div></div><div class="top"><p class="src"><a name="v:llvmFunTy" class="def">llvmFunTy</a> :: <a href="LlvmCodeGen-Base.html#t:LiveGlobalRegs">LiveGlobalRegs</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LlvmType">LlvmType</a> <a href="src/LlvmCodeGen-Base.html#llvmFunTy" class="link">Source</a></p><div class="doc"><p>Llvm Function type for Cmm function</p></div></div><div class="top"><p class="src"><a name="v:llvmFunSig" class="def">llvmFunSig</a> :: <a href="LlvmCodeGen-Base.html#t:LiveGlobalRegs">LiveGlobalRegs</a> -&gt; <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="Llvm-Types.html#t:LlvmLinkageType">LlvmLinkageType</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LlvmFunctionDecl">LlvmFunctionDecl</a> <a href="src/LlvmCodeGen-Base.html#llvmFunSig" class="link">Source</a></p><div class="doc"><p>Llvm Function signature</p></div></div><div class="top"><p class="src"><a name="v:llvmStdFunAttrs" class="def">llvmStdFunAttrs</a> :: [<a href="Llvm-Types.html#t:LlvmFuncAttr">LlvmFuncAttr</a>] <a href="src/LlvmCodeGen-Base.html#llvmStdFunAttrs" class="link">Source</a></p><div class="doc"><p>Llvm standard fun attributes</p></div></div><div class="top"><p class="src"><a name="v:llvmFunAlign" class="def">llvmFunAlign</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="Llvm-Types.html#t:LMAlign">LMAlign</a> <a href="src/LlvmCodeGen-Base.html#llvmFunAlign" class="link">Source</a></p><div class="doc"><p>Alignment to use for functions</p></div></div><div class="top"><p class="src"><a name="v:llvmInfAlign" class="def">llvmInfAlign</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="Llvm-Types.html#t:LMAlign">LMAlign</a> <a href="src/LlvmCodeGen-Base.html#llvmInfAlign" class="link">Source</a></p><div class="doc"><p>Alignment to use for into tables</p></div></div><div class="top"><p class="src"><a name="v:llvmPtrBits" class="def">llvmPtrBits</a> :: <a href="DynFlags.html#t:DynFlags">DynFlags</a> -&gt; <a href="../base-4.7.0.1/Data-Int.html#t:Int">Int</a> <a href="src/LlvmCodeGen-Base.html#llvmPtrBits" class="link">Source</a></p><div class="doc"><p>Pointer width</p></div></div><div class="top"><p class="src"><a name="v:mkLlvmFunc" class="def">mkLlvmFunc</a> :: <a href="LlvmCodeGen-Base.html#t:LiveGlobalRegs">LiveGlobalRegs</a> -&gt; <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="Llvm-Types.html#t:LlvmLinkageType">LlvmLinkageType</a> -&gt; <a href="Llvm-Types.html#t:LMSection">LMSection</a> -&gt; <a href="Llvm-AbsSyn.html#t:LlvmBlocks">LlvmBlocks</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-AbsSyn.html#t:LlvmFunction">LlvmFunction</a> <a href="src/LlvmCodeGen-Base.html#mkLlvmFunc" class="link">Source</a></p><div class="doc"><p>Create a Haskell function in LLVM.</p></div></div><div class="top"><p class="src"><a name="v:tysToParams" class="def">tysToParams</a> :: [<a href="Llvm-Types.html#t:LlvmType">LlvmType</a>] -&gt; [<a href="Llvm-Types.html#t:LlvmParameter">LlvmParameter</a>] <a href="src/LlvmCodeGen-Base.html#tysToParams" class="link">Source</a></p><div class="doc"><p>Convert a list of types to a list of function parameters
 (each with no parameter attributes)</p></div></div><div class="top"><p class="src"><a name="v:strCLabel_llvm" class="def">strCLabel_llvm</a> :: <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LMString">LMString</a> <a href="src/LlvmCodeGen-Base.html#strCLabel_llvm" class="link">Source</a></p><div class="doc"><p>Pretty print a <code><a href="CLabel.html#t:CLabel">CLabel</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:strDisplayName_llvm" class="def">strDisplayName_llvm</a> :: <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LMString">LMString</a> <a href="src/LlvmCodeGen-Base.html#strDisplayName_llvm" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:strProcedureName_llvm" class="def">strProcedureName_llvm</a> :: <a href="CLabel.html#t:CLabel">CLabel</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LMString">LMString</a> <a href="src/LlvmCodeGen-Base.html#strProcedureName_llvm" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getGlobalPtr" class="def">getGlobalPtr</a> :: <a href="Llvm-Types.html#t:LMString">LMString</a> -&gt; <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> <a href="Llvm-Types.html#t:LlvmVar">LlvmVar</a> <a href="src/LlvmCodeGen-Base.html#getGlobalPtr" class="link">Source</a></p><div class="doc"><p>Create/get a pointer to a global value. Might return an alias if
 the value in question hasn't been defined yet. We especially make
 no guarantees on the type of the returned pointer.</p></div></div><div class="top"><p class="src"><a name="v:generateAliases" class="def">generateAliases</a> :: <a href="LlvmCodeGen-Base.html#t:LlvmM">LlvmM</a> ([<a href="Llvm-Types.html#t:LMGlobal">LMGlobal</a>], [<a href="Llvm-Types.html#t:LlvmType">LlvmType</a>]) <a href="src/LlvmCodeGen-Base.html#generateAliases" class="link">Source</a></p><div class="doc"><p>Generate definitions for aliases forward-referenced by <code>getGlobalPtr</code>.</p><p>Must be called at a point where we are sure that no new global definitions
 will be generated anymore!</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>