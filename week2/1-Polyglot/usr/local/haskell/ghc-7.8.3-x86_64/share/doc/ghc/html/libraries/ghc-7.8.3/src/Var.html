<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>basicTypes/Var.lhs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
%
% (c) The University of Glasgow 2006
% (c) The GRASP/AQUA Project, Glasgow University, 1992-1998
%
\section{@Vars@: Variables}

\begin{code}
<pre><a name="line-1"></a><span class='hs-comment'>{-# OPTIONS -fno-warn-tabs #-}</span>
<a name="line-2"></a><span class='hs-comment'>-- The above warning supression flag is a temporary kludge.</span>
<a name="line-3"></a><span class='hs-comment'>-- While working on this module you are encouraged to remove it and</span>
<a name="line-4"></a><span class='hs-comment'>-- detab the module (please do the detabbing in a separate patch). See</span>
<a name="line-5"></a><span class='hs-comment'>--     <a href="http://ghc.haskell.org/trac/ghc/wiki/Commentary/CodingStyle#TabsvsSpaces">http://ghc.haskell.org/trac/ghc/wiki/Commentary/CodingStyle#TabsvsSpaces</a></span>
<a name="line-6"></a><span class='hs-comment'>-- for details</span>
<a name="line-7"></a>
<a name="line-8"></a><span class='hs-comment'>-- |</span>
<a name="line-9"></a><span class='hs-comment'>-- #name_types#</span>
<a name="line-10"></a><span class='hs-comment'>-- GHC uses several kinds of name internally:</span>
<a name="line-11"></a><span class='hs-comment'>--</span>
<a name="line-12"></a><span class='hs-comment'>-- * 'OccName.OccName': see "OccName#name_types"</span>
<a name="line-13"></a><span class='hs-comment'>--</span>
<a name="line-14"></a><span class='hs-comment'>-- * 'RdrName.RdrName': see "RdrName#name_types"</span>
<a name="line-15"></a><span class='hs-comment'>--</span>
<a name="line-16"></a><span class='hs-comment'>-- * 'Name.Name': see "Name#name_types"</span>
<a name="line-17"></a><span class='hs-comment'>--</span>
<a name="line-18"></a><span class='hs-comment'>-- * 'Id.Id': see "Id#name_types"</span>
<a name="line-19"></a><span class='hs-comment'>--</span>
<a name="line-20"></a><span class='hs-comment'>-- * 'Var.Var' is a synonym for the 'Id.Id' type but it may additionally </span>
<a name="line-21"></a><span class='hs-comment'>--   potentially contain type variables, which have a 'TypeRep.Kind' </span>
<a name="line-22"></a><span class='hs-comment'>--   rather than a 'TypeRep.Type' and only contain some extra </span>
<a name="line-23"></a><span class='hs-comment'>--   details during typechecking.</span>
<a name="line-24"></a><span class='hs-comment'>-- </span>
<a name="line-25"></a><span class='hs-comment'>--   These 'Var.Var' names may either be global or local, see "Var#globalvslocal"</span>
<a name="line-26"></a><span class='hs-comment'>--</span>
<a name="line-27"></a><span class='hs-comment'>-- #globalvslocal#</span>
<a name="line-28"></a><span class='hs-comment'>-- Global 'Id's and 'Var's are those that are imported or correspond </span>
<a name="line-29"></a><span class='hs-comment'>--    to a data constructor, primitive operation, or record selectors.</span>
<a name="line-30"></a><span class='hs-comment'>-- Local 'Id's and 'Var's are those bound within an expression </span>
<a name="line-31"></a><span class='hs-comment'>--    (e.g. by a lambda) or at the top level of the module being compiled.</span>
<a name="line-32"></a>
<a name="line-33"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>Var</span> <span class='hs-layout'>(</span>
<a name="line-34"></a>        <span class='hs-comment'>-- * The main data type and synonyms</span>
<a name="line-35"></a>        <span class='hs-conid'>Var</span><span class='hs-layout'>,</span> <span class='hs-conid'>CoVar</span><span class='hs-layout'>,</span> <span class='hs-conid'>Id</span><span class='hs-layout'>,</span> <span class='hs-conid'>DictId</span><span class='hs-layout'>,</span> <span class='hs-conid'>DFunId</span><span class='hs-layout'>,</span> <span class='hs-conid'>EvVar</span><span class='hs-layout'>,</span> <span class='hs-conid'>EqVar</span><span class='hs-layout'>,</span> <span class='hs-conid'>EvId</span><span class='hs-layout'>,</span> <span class='hs-conid'>IpId</span><span class='hs-layout'>,</span>
<a name="line-36"></a>        <span class='hs-conid'>TyVar</span><span class='hs-layout'>,</span> <span class='hs-conid'>TypeVar</span><span class='hs-layout'>,</span> <span class='hs-conid'>KindVar</span><span class='hs-layout'>,</span> <span class='hs-conid'>TKVar</span><span class='hs-layout'>,</span>
<a name="line-37"></a>
<a name="line-38"></a>	<span class='hs-comment'>-- ** Taking 'Var's apart</span>
<a name="line-39"></a>	<span class='hs-varid'>varName</span><span class='hs-layout'>,</span> <span class='hs-varid'>varUnique</span><span class='hs-layout'>,</span> <span class='hs-varid'>varType</span><span class='hs-layout'>,</span> 
<a name="line-40"></a>
<a name="line-41"></a>	<span class='hs-comment'>-- ** Modifying 'Var's</span>
<a name="line-42"></a>	<span class='hs-varid'>setVarName</span><span class='hs-layout'>,</span> <span class='hs-varid'>setVarUnique</span><span class='hs-layout'>,</span> <span class='hs-varid'>setVarType</span><span class='hs-layout'>,</span>
<a name="line-43"></a>
<a name="line-44"></a>	<span class='hs-comment'>-- ** Constructing, taking apart, modifying 'Id's</span>
<a name="line-45"></a>	<span class='hs-varid'>mkGlobalVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>mkLocalVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>mkExportedLocalVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>mkCoVar</span><span class='hs-layout'>,</span>
<a name="line-46"></a>	<span class='hs-varid'>idInfo</span><span class='hs-layout'>,</span> <span class='hs-varid'>idDetails</span><span class='hs-layout'>,</span>
<a name="line-47"></a>	<span class='hs-varid'>lazySetIdInfo</span><span class='hs-layout'>,</span> <span class='hs-varid'>setIdDetails</span><span class='hs-layout'>,</span> <span class='hs-varid'>globaliseId</span><span class='hs-layout'>,</span>
<a name="line-48"></a>	<span class='hs-varid'>setIdExported</span><span class='hs-layout'>,</span> <span class='hs-varid'>setIdNotExported</span><span class='hs-layout'>,</span>
<a name="line-49"></a>
<a name="line-50"></a>        <span class='hs-comment'>-- ** Predicates</span>
<a name="line-51"></a>        <span class='hs-varid'>isId</span><span class='hs-layout'>,</span> <span class='hs-varid'>isTKVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>isTyVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>isTcTyVar</span><span class='hs-layout'>,</span>
<a name="line-52"></a>        <span class='hs-varid'>isLocalVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>isLocalId</span><span class='hs-layout'>,</span>
<a name="line-53"></a>	<span class='hs-varid'>isGlobalId</span><span class='hs-layout'>,</span> <span class='hs-varid'>isExportedId</span><span class='hs-layout'>,</span>
<a name="line-54"></a>	<span class='hs-varid'>mustHaveLocalBinding</span><span class='hs-layout'>,</span>
<a name="line-55"></a>
<a name="line-56"></a>	<span class='hs-comment'>-- ** Constructing 'TyVar's</span>
<a name="line-57"></a>	<span class='hs-varid'>mkTyVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>mkTcTyVar</span><span class='hs-layout'>,</span> <span class='hs-varid'>mkKindVar</span><span class='hs-layout'>,</span>
<a name="line-58"></a>
<a name="line-59"></a>	<span class='hs-comment'>-- ** Taking 'TyVar's apart</span>
<a name="line-60"></a>        <span class='hs-varid'>tyVarName</span><span class='hs-layout'>,</span> <span class='hs-varid'>tyVarKind</span><span class='hs-layout'>,</span> <span class='hs-varid'>tcTyVarDetails</span><span class='hs-layout'>,</span> <span class='hs-varid'>setTcTyVarDetails</span><span class='hs-layout'>,</span>
<a name="line-61"></a>
<a name="line-62"></a>	<span class='hs-comment'>-- ** Modifying 'TyVar's</span>
<a name="line-63"></a>	<span class='hs-varid'>setTyVarName</span><span class='hs-layout'>,</span> <span class='hs-varid'>setTyVarUnique</span><span class='hs-layout'>,</span> <span class='hs-varid'>setTyVarKind</span><span class='hs-layout'>,</span> <span class='hs-varid'>updateTyVarKind</span><span class='hs-layout'>,</span>
<a name="line-64"></a>        <span class='hs-varid'>updateTyVarKindM</span>
<a name="line-65"></a>
<a name="line-66"></a>    <span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-67"></a>
<a name="line-68"></a><span class='hs-cpp'>#include "HsVersions.h"</span>
<a name="line-69"></a>
<a name="line-70"></a><span class='hs-keyword'>import</span> <span class='hs-comment'>{-# SOURCE #-}</span>	<span class='hs-conid'>TypeRep</span><span class='hs-layout'>(</span> <span class='hs-conid'>Type</span><span class='hs-layout'>,</span> <span class='hs-conid'>Kind</span><span class='hs-layout'>,</span> <span class='hs-conid'>SuperKind</span> <span class='hs-layout'>)</span>
<a name="line-71"></a><span class='hs-keyword'>import</span> <span class='hs-comment'>{-# SOURCE #-}</span>	<span class='hs-conid'>TcType</span><span class='hs-layout'>(</span> <span class='hs-conid'>TcTyVarDetails</span><span class='hs-layout'>,</span> <span class='hs-varid'>pprTcTyVarDetails</span> <span class='hs-layout'>)</span>
<a name="line-72"></a><span class='hs-keyword'>import</span> <span class='hs-comment'>{-# SOURCE #-}</span>	<span class='hs-conid'>IdInfo</span><span class='hs-layout'>(</span> <span class='hs-conid'>IdDetails</span><span class='hs-layout'>,</span> <span class='hs-conid'>IdInfo</span><span class='hs-layout'>,</span> <span class='hs-varid'>coVarDetails</span><span class='hs-layout'>,</span> <span class='hs-varid'>vanillaIdInfo</span><span class='hs-layout'>,</span> <span class='hs-varid'>pprIdDetails</span> <span class='hs-layout'>)</span>
<a name="line-73"></a>
<a name="line-74"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Name</span> <span class='hs-varid'>hiding</span> <span class='hs-layout'>(</span><span class='hs-varid'>varName</span><span class='hs-layout'>)</span>
<a name="line-75"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Unique</span>
<a name="line-76"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Util</span>
<a name="line-77"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>FastTypes</span>
<a name="line-78"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>FastString</span>
<a name="line-79"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Outputable</span>
<a name="line-80"></a>
<a name="line-81"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>Data</span><span class='hs-varop'>.</span><span class='hs-conid'>Data</span>
</pre>\end{code}


%************************************************************************
%*									*
                     Synonyms									
%*									*
%************************************************************************
-- These synonyms are here and not in Id because otherwise we need a very
-- large number of SOURCE imports of Id.hs :-(

\begin{code}
<pre><a name="line-1"></a><a name="Id"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>Id</span>    <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Var</span>       <span class='hs-comment'>-- A term-level identifier</span>
<a name="line-2"></a>
<a name="line-3"></a><a name="TyVar"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>TyVar</span>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Var</span>     <span class='hs-comment'>-- Type *or* kind variable (historical)</span>
<a name="line-4"></a>
<a name="line-5"></a><a name="TKVar"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>TKVar</span>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Var</span>     <span class='hs-comment'>-- Type *or* kind variable (historical)</span>
<a name="line-6"></a><a name="TypeVar"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>TypeVar</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Var</span>     <span class='hs-comment'>-- Definitely a type variable</span>
<a name="line-7"></a><a name="KindVar"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>KindVar</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Var</span>     <span class='hs-comment'>-- Definitely a kind variable</span>
<a name="line-8"></a>     	       	       <span class='hs-comment'>-- See Note [Kind and type variables]</span>
<a name="line-9"></a>
<a name="line-10"></a><a name="EvId"></a><span class='hs-comment'>-- See Note [Evidence: EvIds and CoVars]</span>
<a name="line-11"></a><a name="EvId"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>EvId</span>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Id</span>        <span class='hs-comment'>-- Term-level evidence: DictId, IpId, or EqVar</span>
<a name="line-12"></a><a name="EvVar"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>EvVar</span>  <span class='hs-keyglyph'>=</span> <span class='hs-conid'>EvId</span>	<span class='hs-comment'>-- ...historical name for EvId</span>
<a name="line-13"></a><a name="DFunId"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>DFunId</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Id</span>	<span class='hs-comment'>-- A dictionary function</span>
<a name="line-14"></a><a name="DictId"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>DictId</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>EvId</span>	<span class='hs-comment'>-- A dictionary variable</span>
<a name="line-15"></a><a name="IpId"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>IpId</span>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>EvId</span>      <span class='hs-comment'>-- A term-level implicit parameter</span>
<a name="line-16"></a><a name="EqVar"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>EqVar</span>  <span class='hs-keyglyph'>=</span> <span class='hs-conid'>EvId</span>      <span class='hs-comment'>-- Boxed equality evidence</span>
<a name="line-17"></a>
<a name="line-18"></a><a name="CoVar"></a><span class='hs-keyword'>type</span> <span class='hs-conid'>CoVar</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Id</span>		<span class='hs-comment'>-- See Note [Evidence: EvIds and CoVars]</span>
</pre>\end{code}

Note [Evidence: EvIds and CoVars]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* An EvId (evidence Id) is a *boxed*, term-level evidence variable 
  (dictionary, implicit parameter, or equality).

* A CoVar (coercion variable) is an *unboxed* term-level evidence variable
  of type (t1 ~# t2).  So it's the unboxed version of an EqVar.

* Only CoVars can occur in Coercions, EqVars appear in TcCoercions.

* DictId, IpId, and EqVar are synonyms when we know what kind of
  evidence we are talking about.  For example, an EqVar has type (t1 ~ t2).

Note [Kind and type variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Before kind polymorphism, TyVar were used to mean type variables. Now
they are use to mean kind *or* type variables. KindVar is used when we
know for sure that it is a kind variable. In future, we might want to
go over the whole compiler code to use:
   - TKVar   to mean kind or type variables
   - TypeVar to mean         type variables only
   - KindVar to mean kind         variables


%************************************************************************
%*									*
\subsection{The main data type declarations}
%*									*
%************************************************************************


Every @Var@ has a @Unique@, to uniquify it and for fast comparison, a
@Type@, and an @IdInfo@ (non-essential info about it, e.g.,
strictness).  The essential info about different kinds of @Vars@ is
in its @VarDetails@.

\begin{code}
<pre><a name="line-1"></a><a name="Var"></a><span class='hs-comment'>-- | Essentially a typed 'Name', that may also contain some additional information</span>
<a name="line-2"></a><a name="Var"></a><span class='hs-comment'>-- about the 'Var' and it's use sites.</span>
<a name="line-3"></a><a name="Var"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>Var</span>
<a name="line-4"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-conid'>TyVar</span> <span class='hs-layout'>{</span>  <span class='hs-comment'>-- Type and kind variables</span>
<a name="line-5"></a>             <span class='hs-comment'>-- see Note [Kind and type variables]</span>
<a name="line-6"></a>	<span class='hs-varid'>varName</span>    <span class='hs-keyglyph'>::</span> <span class='hs-varop'>!</span><span class='hs-conid'>Name</span><span class='hs-layout'>,</span>
<a name="line-7"></a>	<span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>FastInt</span><span class='hs-layout'>,</span>	     <span class='hs-comment'>-- Key for fast comparison</span>
<a name="line-8"></a>				     <span class='hs-comment'>-- Identical to the Unique in the name,</span>
<a name="line-9"></a>				     <span class='hs-comment'>-- cached here for speed</span>
<a name="line-10"></a>	<span class='hs-varid'>varType</span>    <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Kind</span>           <span class='hs-comment'>-- ^ The type or kind of the 'Var' in question</span>
<a name="line-11"></a> <span class='hs-layout'>}</span>
<a name="line-12"></a>
<a name="line-13"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>TcTyVar</span> <span class='hs-layout'>{</span> 				<span class='hs-comment'>-- Used only during type inference</span>
<a name="line-14"></a>					<span class='hs-comment'>-- Used for kind variables during </span>
<a name="line-15"></a>					<span class='hs-comment'>-- inference, as well</span>
<a name="line-16"></a>	<span class='hs-varid'>varName</span>        <span class='hs-keyglyph'>::</span> <span class='hs-varop'>!</span><span class='hs-conid'>Name</span><span class='hs-layout'>,</span>
<a name="line-17"></a>	<span class='hs-varid'>realUnique</span>     <span class='hs-keyglyph'>::</span> <span class='hs-conid'>FastInt</span><span class='hs-layout'>,</span>
<a name="line-18"></a>	<span class='hs-varid'>varType</span>        <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Kind</span><span class='hs-layout'>,</span>
<a name="line-19"></a>	<span class='hs-varid'>tc_tv_details</span>  <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TcTyVarDetails</span> <span class='hs-layout'>}</span>
<a name="line-20"></a>
<a name="line-21"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Id</span> <span class='hs-layout'>{</span>
<a name="line-22"></a>	<span class='hs-varid'>varName</span>    <span class='hs-keyglyph'>::</span> <span class='hs-varop'>!</span><span class='hs-conid'>Name</span><span class='hs-layout'>,</span>
<a name="line-23"></a>	<span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>FastInt</span><span class='hs-layout'>,</span>
<a name="line-24"></a>   	<span class='hs-varid'>varType</span>    <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Type</span><span class='hs-layout'>,</span>
<a name="line-25"></a>	<span class='hs-varid'>idScope</span>    <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IdScope</span><span class='hs-layout'>,</span>
<a name="line-26"></a>	<span class='hs-varid'>id_details</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IdDetails</span><span class='hs-layout'>,</span>	<span class='hs-comment'>-- Stable, doesn't change</span>
<a name="line-27"></a>	<span class='hs-varid'>id_info</span>    <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IdInfo</span> <span class='hs-layout'>}</span>		<span class='hs-comment'>-- Unstable, updated by simplifier</span>
<a name="line-28"></a>    <span class='hs-keyword'>deriving</span> <span class='hs-conid'>Typeable</span>
<a name="line-29"></a>
<a name="line-30"></a><a name="IdScope"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>IdScope</span>	<span class='hs-comment'>-- See Note [GlobalId/LocalId]</span>
<a name="line-31"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-conid'>GlobalId</span> 
<a name="line-32"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>LocalId</span> <span class='hs-conid'>ExportFlag</span>
<a name="line-33"></a>
<a name="line-34"></a><a name="ExportFlag"></a><span class='hs-keyword'>data</span> <span class='hs-conid'>ExportFlag</span> 
<a name="line-35"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-conid'>NotExported</span>	<span class='hs-comment'>-- ^ Not exported: may be discarded as dead code.</span>
<a name="line-36"></a>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Exported</span>	<span class='hs-comment'>-- ^ Exported: kept alive</span>
</pre>\end{code}

Note [GlobalId/LocalId]
~~~~~~~~~~~~~~~~~~~~~~~
A GlobalId is
  * always a constant (top-level)
  * imported, or data constructor, or primop, or record selector
  * has a Unique that is globally unique across the whole
    GHC invocation (a single invocation may compile multiple modules)
  * never treated as a candidate by the free-variable finder;
	it's a constant!

A LocalId is 
  * bound within an expression (lambda, case, local let(rec))
  * or defined at top level in the module being compiled
  * always treated as a candidate by the free-variable finder

After CoreTidy, top-level LocalIds are turned into GlobalIds

\begin{code}
<pre><a name="line-1"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Outputable</span> <span class='hs-conid'>Var</span> <span class='hs-keyword'>where</span>
<a name="line-2"></a>  <span class='hs-varid'>ppr</span> <span class='hs-varid'>var</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ppr</span> <span class='hs-layout'>(</span><span class='hs-varid'>varName</span> <span class='hs-varid'>var</span><span class='hs-layout'>)</span> <span class='hs-varop'>&lt;+&gt;</span> <span class='hs-varid'>ifPprDebug</span> <span class='hs-layout'>(</span><span class='hs-varid'>brackets</span> <span class='hs-layout'>(</span><span class='hs-varid'>ppr_debug</span> <span class='hs-varid'>var</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-3"></a><span class='hs-comment'>-- Printing the type on every occurrence is too much!</span>
<a name="line-4"></a><span class='hs-comment'>--            &lt;+&gt; if (not (gopt Opt_SuppressVarKinds dflags))</span>
<a name="line-5"></a><span class='hs-comment'>--                then ifPprDebug (text "::" &lt;+&gt; ppr (tyVarKind var) &lt;+&gt; text ")")</span>
<a name="line-6"></a><span class='hs-comment'>--                else empty</span>
<a name="line-7"></a>
<a name="line-8"></a><a name="ppr_debug"></a><span class='hs-definition'>ppr_debug</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>SDoc</span>
<a name="line-9"></a><span class='hs-definition'>ppr_debug</span> <span class='hs-layout'>(</span><span class='hs-conid'>TyVar</span> <span class='hs-layout'>{</span><span class='hs-layout'>}</span><span class='hs-layout'>)</span>                           <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ptext</span> <span class='hs-layout'>(</span><span class='hs-varid'>sLit</span> <span class='hs-str'>"tv"</span><span class='hs-layout'>)</span>
<a name="line-10"></a><span class='hs-definition'>ppr_debug</span> <span class='hs-layout'>(</span><span class='hs-conid'>TcTyVar</span> <span class='hs-layout'>{</span><span class='hs-varid'>tc_tv_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>d</span><span class='hs-layout'>}</span><span class='hs-layout'>)</span>        <span class='hs-keyglyph'>=</span> <span class='hs-varid'>pprTcTyVarDetails</span> <span class='hs-varid'>d</span>
<a name="line-11"></a><span class='hs-definition'>ppr_debug</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>s</span><span class='hs-layout'>,</span> <span class='hs-varid'>id_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>d</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ppr_id_scope</span> <span class='hs-varid'>s</span> <span class='hs-varop'>&lt;&gt;</span> <span class='hs-varid'>pprIdDetails</span> <span class='hs-varid'>d</span>
<a name="line-12"></a>
<a name="line-13"></a><a name="ppr_id_scope"></a><span class='hs-definition'>ppr_id_scope</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IdScope</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>SDoc</span>
<a name="line-14"></a><span class='hs-definition'>ppr_id_scope</span> <span class='hs-conid'>GlobalId</span>              <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ptext</span> <span class='hs-layout'>(</span><span class='hs-varid'>sLit</span> <span class='hs-str'>"gid"</span><span class='hs-layout'>)</span>
<a name="line-15"></a><span class='hs-definition'>ppr_id_scope</span> <span class='hs-layout'>(</span><span class='hs-conid'>LocalId</span> <span class='hs-conid'>Exported</span><span class='hs-layout'>)</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ptext</span> <span class='hs-layout'>(</span><span class='hs-varid'>sLit</span> <span class='hs-str'>"lidx"</span><span class='hs-layout'>)</span>
<a name="line-16"></a><span class='hs-definition'>ppr_id_scope</span> <span class='hs-layout'>(</span><span class='hs-conid'>LocalId</span> <span class='hs-conid'>NotExported</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ptext</span> <span class='hs-layout'>(</span><span class='hs-varid'>sLit</span> <span class='hs-str'>"lid"</span><span class='hs-layout'>)</span>
<a name="line-17"></a>
<a name="line-18"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>NamedThing</span> <span class='hs-conid'>Var</span> <span class='hs-keyword'>where</span>
<a name="line-19"></a>  <span class='hs-varid'>getName</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>varName</span>
<a name="line-20"></a>
<a name="line-21"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Uniquable</span> <span class='hs-conid'>Var</span> <span class='hs-keyword'>where</span>
<a name="line-22"></a>  <span class='hs-varid'>getUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>varUnique</span>
<a name="line-23"></a>
<a name="line-24"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Eq</span> <span class='hs-conid'>Var</span> <span class='hs-keyword'>where</span>
<a name="line-25"></a>    <span class='hs-varid'>a</span> <span class='hs-varop'>==</span> <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>a</span> <span class='hs-varop'>==#</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>b</span>
<a name="line-26"></a>
<a name="line-27"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Ord</span> <span class='hs-conid'>Var</span> <span class='hs-keyword'>where</span>
<a name="line-28"></a>    <span class='hs-varid'>a</span> <span class='hs-varop'>&lt;=</span> <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>a</span> <span class='hs-varop'>&lt;=#</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>b</span>
<a name="line-29"></a>    <span class='hs-varid'>a</span> <span class='hs-varop'>&lt;</span>	 <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>a</span> <span class='hs-varop'>&lt;#</span>  <span class='hs-varid'>realUnique</span> <span class='hs-varid'>b</span>
<a name="line-30"></a>    <span class='hs-varid'>a</span> <span class='hs-varop'>&gt;=</span> <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>a</span> <span class='hs-varop'>&gt;=#</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>b</span>
<a name="line-31"></a>    <span class='hs-varid'>a</span> <span class='hs-varop'>&gt;</span>	 <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>realUnique</span> <span class='hs-varid'>a</span> <span class='hs-varop'>&gt;#</span>  <span class='hs-varid'>realUnique</span> <span class='hs-varid'>b</span>
<a name="line-32"></a>    <span class='hs-varid'>a</span> <span class='hs-varop'>`compare`</span> <span class='hs-varid'>b</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>varUnique</span> <span class='hs-varid'>a</span> <span class='hs-varop'>`compare`</span> <span class='hs-varid'>varUnique</span> <span class='hs-varid'>b</span>
<a name="line-33"></a>
<a name="line-34"></a><span class='hs-keyword'>instance</span> <span class='hs-conid'>Data</span> <span class='hs-conid'>Var</span> <span class='hs-keyword'>where</span>
<a name="line-35"></a>  <span class='hs-comment'>-- don't traverse?</span>
<a name="line-36"></a>  <span class='hs-varid'>toConstr</span> <span class='hs-keyword'>_</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>abstractConstr</span> <span class='hs-str'>"Var"</span>
<a name="line-37"></a>  <span class='hs-varid'>gunfold</span> <span class='hs-keyword'>_</span> <span class='hs-keyword'>_</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>error</span> <span class='hs-str'>"gunfold"</span>
<a name="line-38"></a>  <span class='hs-varid'>dataTypeOf</span> <span class='hs-keyword'>_</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>mkNoRepType</span> <span class='hs-str'>"Var"</span>
</pre>\end{code}


\begin{code}
<pre><a name="line-1"></a><a name="varUnique"></a><span class='hs-definition'>varUnique</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unique</span>
<a name="line-2"></a><span class='hs-definition'>varUnique</span> <span class='hs-varid'>var</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>mkUniqueGrimily</span> <span class='hs-layout'>(</span><span class='hs-varid'>iBox</span> <span class='hs-layout'>(</span><span class='hs-varid'>realUnique</span> <span class='hs-varid'>var</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<a name="line-3"></a>
<a name="line-4"></a><a name="setVarUnique"></a><span class='hs-definition'>setVarUnique</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unique</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Var</span>
<a name="line-5"></a><span class='hs-definition'>setVarUnique</span> <span class='hs-varid'>var</span> <span class='hs-varid'>uniq</span> 
<a name="line-6"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>var</span> <span class='hs-layout'>{</span> <span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getKeyFastInt</span> <span class='hs-varid'>uniq</span><span class='hs-layout'>,</span> 
<a name="line-7"></a>	  <span class='hs-varid'>varName</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>setNameUnique</span> <span class='hs-layout'>(</span><span class='hs-varid'>varName</span> <span class='hs-varid'>var</span><span class='hs-layout'>)</span> <span class='hs-varid'>uniq</span> <span class='hs-layout'>}</span>
<a name="line-8"></a>
<a name="line-9"></a><a name="setVarName"></a><span class='hs-definition'>setVarName</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Var</span>
<a name="line-10"></a><span class='hs-definition'>setVarName</span> <span class='hs-varid'>var</span> <span class='hs-varid'>new_name</span>
<a name="line-11"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>var</span> <span class='hs-layout'>{</span> <span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getKeyFastInt</span> <span class='hs-layout'>(</span><span class='hs-varid'>getUnique</span> <span class='hs-varid'>new_name</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span> 
<a name="line-12"></a>   	  <span class='hs-varid'>varName</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>new_name</span> <span class='hs-layout'>}</span>
<a name="line-13"></a>
<a name="line-14"></a><a name="setVarType"></a><span class='hs-definition'>setVarType</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Type</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-15"></a><span class='hs-definition'>setVarType</span> <span class='hs-varid'>id</span> <span class='hs-varid'>ty</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>varType</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ty</span> <span class='hs-layout'>}</span>
</pre>\end{code}


%************************************************************************
%*									*
\subsection{Type and kind variables}
%*									*
%************************************************************************

\begin{code}
<pre><a name="line-1"></a><a name="tyVarName"></a><span class='hs-definition'>tyVarName</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Name</span>
<a name="line-2"></a><span class='hs-definition'>tyVarName</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>varName</span>
<a name="line-3"></a>
<a name="line-4"></a><a name="tyVarKind"></a><span class='hs-definition'>tyVarKind</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Kind</span>
<a name="line-5"></a><span class='hs-definition'>tyVarKind</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>varType</span>
<a name="line-6"></a>
<a name="line-7"></a><a name="setTyVarUnique"></a><span class='hs-definition'>setTyVarUnique</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Unique</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span>
<a name="line-8"></a><span class='hs-definition'>setTyVarUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>setVarUnique</span>
<a name="line-9"></a>
<a name="line-10"></a><a name="setTyVarName"></a><span class='hs-definition'>setTyVarName</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span>
<a name="line-11"></a><span class='hs-definition'>setTyVarName</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>setVarName</span>
<a name="line-12"></a>
<a name="line-13"></a><a name="setTyVarKind"></a><span class='hs-definition'>setTyVarKind</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Kind</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span>
<a name="line-14"></a><span class='hs-definition'>setTyVarKind</span> <span class='hs-varid'>tv</span> <span class='hs-varid'>k</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>tv</span> <span class='hs-layout'>{</span><span class='hs-varid'>varType</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>k</span><span class='hs-layout'>}</span>
<a name="line-15"></a>
<a name="line-16"></a><a name="updateTyVarKind"></a><span class='hs-definition'>updateTyVarKind</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Kind</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Kind</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span>
<a name="line-17"></a><span class='hs-definition'>updateTyVarKind</span> <span class='hs-varid'>update</span> <span class='hs-varid'>tv</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>tv</span> <span class='hs-layout'>{</span><span class='hs-varid'>varType</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>update</span> <span class='hs-layout'>(</span><span class='hs-varid'>tyVarKind</span> <span class='hs-varid'>tv</span><span class='hs-layout'>)</span><span class='hs-layout'>}</span>
<a name="line-18"></a>
<a name="line-19"></a><a name="updateTyVarKindM"></a><span class='hs-definition'>updateTyVarKindM</span> <span class='hs-keyglyph'>::</span> <span class='hs-layout'>(</span><span class='hs-conid'>Monad</span> <span class='hs-varid'>m</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=&gt;</span> <span class='hs-layout'>(</span><span class='hs-conid'>Kind</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>m</span> <span class='hs-conid'>Kind</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-varid'>m</span> <span class='hs-conid'>TyVar</span>
<a name="line-20"></a><span class='hs-definition'>updateTyVarKindM</span> <span class='hs-varid'>update</span> <span class='hs-varid'>tv</span>
<a name="line-21"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-keyword'>do</span> <span class='hs-layout'>{</span> <span class='hs-varid'>k'</span> <span class='hs-keyglyph'>&lt;-</span> <span class='hs-varid'>update</span> <span class='hs-layout'>(</span><span class='hs-varid'>tyVarKind</span> <span class='hs-varid'>tv</span><span class='hs-layout'>)</span>
<a name="line-22"></a>       <span class='hs-layout'>;</span> <span class='hs-varid'>return</span> <span class='hs-varop'>$</span> <span class='hs-varid'>tv</span> <span class='hs-layout'>{</span><span class='hs-varid'>varType</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>k'</span><span class='hs-layout'>}</span> <span class='hs-layout'>}</span>
</pre>\end{code}

\begin{code}
<pre><a name="line-1"></a><a name="mkTyVar"></a><span class='hs-definition'>mkTyVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Kind</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span>
<a name="line-2"></a><span class='hs-definition'>mkTyVar</span> <span class='hs-varid'>name</span> <span class='hs-varid'>kind</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>TyVar</span> <span class='hs-layout'>{</span> <span class='hs-varid'>varName</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>name</span>
<a name="line-3"></a>			  <span class='hs-layout'>,</span> <span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getKeyFastInt</span> <span class='hs-layout'>(</span><span class='hs-varid'>nameUnique</span> <span class='hs-varid'>name</span><span class='hs-layout'>)</span>
<a name="line-4"></a>			  <span class='hs-layout'>,</span> <span class='hs-varid'>varType</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>kind</span>
<a name="line-5"></a>			<span class='hs-layout'>}</span>
<a name="line-6"></a>
<a name="line-7"></a><a name="mkTcTyVar"></a><span class='hs-definition'>mkTcTyVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Kind</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TcTyVarDetails</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span>
<a name="line-8"></a><span class='hs-definition'>mkTcTyVar</span> <span class='hs-varid'>name</span> <span class='hs-varid'>kind</span> <span class='hs-varid'>details</span>
<a name="line-9"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-comment'>-- NB: 'kind' may be a coercion kind; cf, 'TcMType.newMetaCoVar'</span>
<a name="line-10"></a>    <span class='hs-conid'>TcTyVar</span> <span class='hs-layout'>{</span>	<span class='hs-varid'>varName</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>name</span><span class='hs-layout'>,</span>
<a name="line-11"></a>		<span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getKeyFastInt</span> <span class='hs-layout'>(</span><span class='hs-varid'>nameUnique</span> <span class='hs-varid'>name</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<a name="line-12"></a>		<span class='hs-varid'>varType</span>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>kind</span><span class='hs-layout'>,</span>
<a name="line-13"></a>		<span class='hs-varid'>tc_tv_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span>
<a name="line-14"></a>	<span class='hs-layout'>}</span>
<a name="line-15"></a>
<a name="line-16"></a><a name="tcTyVarDetails"></a><span class='hs-definition'>tcTyVarDetails</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TcTyVarDetails</span>
<a name="line-17"></a><span class='hs-definition'>tcTyVarDetails</span> <span class='hs-layout'>(</span><span class='hs-conid'>TcTyVar</span> <span class='hs-layout'>{</span> <span class='hs-varid'>tc_tv_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span>
<a name="line-18"></a><span class='hs-definition'>tcTyVarDetails</span> <span class='hs-varid'>var</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>pprPanic</span> <span class='hs-str'>"tcTyVarDetails"</span> <span class='hs-layout'>(</span><span class='hs-varid'>ppr</span> <span class='hs-varid'>var</span><span class='hs-layout'>)</span>
<a name="line-19"></a>
<a name="line-20"></a><a name="setTcTyVarDetails"></a><span class='hs-definition'>setTcTyVarDetails</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>TyVar</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TcTyVarDetails</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>TyVar</span>
<a name="line-21"></a><span class='hs-definition'>setTcTyVarDetails</span> <span class='hs-varid'>tv</span> <span class='hs-varid'>details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>tv</span> <span class='hs-layout'>{</span> <span class='hs-varid'>tc_tv_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span> <span class='hs-layout'>}</span>
<a name="line-22"></a>
<a name="line-23"></a><a name="mkKindVar"></a><span class='hs-definition'>mkKindVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>SuperKind</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>KindVar</span>
<a name="line-24"></a><span class='hs-comment'>-- mkKindVar take a SuperKind as argument because we don't have access</span>
<a name="line-25"></a><span class='hs-comment'>-- to superKind here.</span>
<a name="line-26"></a><span class='hs-definition'>mkKindVar</span> <span class='hs-varid'>name</span> <span class='hs-varid'>kind</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>TyVar</span>
<a name="line-27"></a>  <span class='hs-layout'>{</span> <span class='hs-varid'>varName</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>name</span>
<a name="line-28"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getKeyFastInt</span> <span class='hs-layout'>(</span><span class='hs-varid'>nameUnique</span> <span class='hs-varid'>name</span><span class='hs-layout'>)</span>
<a name="line-29"></a>  <span class='hs-layout'>,</span> <span class='hs-varid'>varType</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>kind</span> <span class='hs-layout'>}</span>
<a name="line-30"></a>
</pre>\end{code}

%************************************************************************
%*									*
\subsection{Ids}
%*									*
%************************************************************************

\begin{code}
<pre><a name="line-1"></a><a name="idInfo"></a><span class='hs-definition'>idInfo</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdInfo</span>
<a name="line-2"></a><span class='hs-definition'>idInfo</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>id_info</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>info</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>info</span>
<a name="line-3"></a><span class='hs-definition'>idInfo</span> <span class='hs-varid'>other</span> 	       	       <span class='hs-keyglyph'>=</span> <span class='hs-varid'>pprPanic</span> <span class='hs-str'>"idInfo"</span> <span class='hs-layout'>(</span><span class='hs-varid'>ppr</span> <span class='hs-varid'>other</span><span class='hs-layout'>)</span>
<a name="line-4"></a>
<a name="line-5"></a><a name="idDetails"></a><span class='hs-definition'>idDetails</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdDetails</span>
<a name="line-6"></a><span class='hs-definition'>idDetails</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>id_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span>
<a name="line-7"></a><span class='hs-definition'>idDetails</span> <span class='hs-varid'>other</span> 	       	        <span class='hs-keyglyph'>=</span> <span class='hs-varid'>pprPanic</span> <span class='hs-str'>"idDetails"</span> <span class='hs-layout'>(</span><span class='hs-varid'>ppr</span> <span class='hs-varid'>other</span><span class='hs-layout'>)</span>
<a name="line-8"></a>
<a name="line-9"></a><a name="mkGlobalVar"></a><span class='hs-comment'>-- The next three have a 'Var' suffix even though they always build</span>
<a name="line-10"></a><span class='hs-comment'>-- Ids, because Id.lhs uses 'mkGlobalId' etc with different types</span>
<a name="line-11"></a><span class='hs-definition'>mkGlobalVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IdDetails</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Type</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdInfo</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-12"></a><span class='hs-definition'>mkGlobalVar</span> <span class='hs-varid'>details</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-varid'>info</span>
<a name="line-13"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>mk_id</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-conid'>GlobalId</span> <span class='hs-varid'>details</span> <span class='hs-varid'>info</span>
<a name="line-14"></a>
<a name="line-15"></a><a name="mkLocalVar"></a><span class='hs-definition'>mkLocalVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IdDetails</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Type</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdInfo</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-16"></a><span class='hs-definition'>mkLocalVar</span> <span class='hs-varid'>details</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-varid'>info</span>
<a name="line-17"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>mk_id</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-layout'>(</span><span class='hs-conid'>LocalId</span> <span class='hs-conid'>NotExported</span><span class='hs-layout'>)</span> <span class='hs-varid'>details</span>  <span class='hs-varid'>info</span>
<a name="line-18"></a>
<a name="line-19"></a><a name="mkCoVar"></a><span class='hs-definition'>mkCoVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Type</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>CoVar</span>
<a name="line-20"></a><span class='hs-comment'>-- Coercion variables have no IdInfo</span>
<a name="line-21"></a><span class='hs-definition'>mkCoVar</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>mk_id</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-layout'>(</span><span class='hs-conid'>LocalId</span> <span class='hs-conid'>NotExported</span><span class='hs-layout'>)</span> <span class='hs-varid'>coVarDetails</span> <span class='hs-varid'>vanillaIdInfo</span>
<a name="line-22"></a>
<a name="line-23"></a><a name="mkExportedLocalVar"></a><span class='hs-comment'>-- | Exported 'Var's will not be removed as dead code</span>
<a name="line-24"></a><span class='hs-definition'>mkExportedLocalVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>IdDetails</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Type</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdInfo</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-25"></a><span class='hs-definition'>mkExportedLocalVar</span> <span class='hs-varid'>details</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-varid'>info</span> 
<a name="line-26"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-varid'>mk_id</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-layout'>(</span><span class='hs-conid'>LocalId</span> <span class='hs-conid'>Exported</span><span class='hs-layout'>)</span> <span class='hs-varid'>details</span> <span class='hs-varid'>info</span>
<a name="line-27"></a>
<a name="line-28"></a><a name="mk_id"></a><span class='hs-definition'>mk_id</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Name</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Type</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdScope</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdDetails</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdInfo</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-29"></a><span class='hs-definition'>mk_id</span> <span class='hs-varid'>name</span> <span class='hs-varid'>ty</span> <span class='hs-varid'>scope</span> <span class='hs-varid'>details</span> <span class='hs-varid'>info</span>
<a name="line-30"></a>  <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>varName</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>name</span><span class='hs-layout'>,</span> 
<a name="line-31"></a>	 <span class='hs-varid'>realUnique</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>getKeyFastInt</span> <span class='hs-layout'>(</span><span class='hs-varid'>nameUnique</span> <span class='hs-varid'>name</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<a name="line-32"></a>	 <span class='hs-varid'>varType</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>ty</span><span class='hs-layout'>,</span>	
<a name="line-33"></a>	 <span class='hs-varid'>idScope</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>scope</span><span class='hs-layout'>,</span>
<a name="line-34"></a>	 <span class='hs-varid'>id_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span><span class='hs-layout'>,</span>
<a name="line-35"></a>	 <span class='hs-varid'>id_info</span>    <span class='hs-keyglyph'>=</span> <span class='hs-varid'>info</span> <span class='hs-layout'>}</span>
<a name="line-36"></a>
<a name="line-37"></a><a name="lazySetIdInfo"></a><span class='hs-comment'>-------------------</span>
<a name="line-38"></a><span class='hs-definition'>lazySetIdInfo</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdInfo</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Var</span>
<a name="line-39"></a><span class='hs-definition'>lazySetIdInfo</span> <span class='hs-varid'>id</span> <span class='hs-varid'>info</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>id_info</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>info</span> <span class='hs-layout'>}</span>
<a name="line-40"></a>
<a name="line-41"></a><a name="setIdDetails"></a><span class='hs-definition'>setIdDetails</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>IdDetails</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-42"></a><span class='hs-definition'>setIdDetails</span> <span class='hs-varid'>id</span> <span class='hs-varid'>details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>id_details</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>details</span> <span class='hs-layout'>}</span>
<a name="line-43"></a>
<a name="line-44"></a><a name="globaliseId"></a><span class='hs-definition'>globaliseId</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-45"></a><span class='hs-comment'>-- ^ If it's a local, make it global</span>
<a name="line-46"></a><span class='hs-definition'>globaliseId</span> <span class='hs-varid'>id</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>GlobalId</span> <span class='hs-layout'>}</span>
<a name="line-47"></a>
<a name="line-48"></a><a name="setIdExported"></a><span class='hs-definition'>setIdExported</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-49"></a><span class='hs-comment'>-- ^ Exports the given local 'Id'. Can also be called on global 'Id's, such as data constructors</span>
<a name="line-50"></a><span class='hs-comment'>-- and class operations, which are born as global 'Id's and automatically exported</span>
<a name="line-51"></a><span class='hs-definition'>setIdExported</span> <span class='hs-varid'>id</span><span class='hs-keyglyph'>@</span><span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>LocalId</span> <span class='hs-layout'>{</span><span class='hs-layout'>}</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>LocalId</span> <span class='hs-conid'>Exported</span> <span class='hs-layout'>}</span>
<a name="line-52"></a><span class='hs-definition'>setIdExported</span> <span class='hs-varid'>id</span><span class='hs-keyglyph'>@</span><span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>GlobalId</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span>   <span class='hs-keyglyph'>=</span> <span class='hs-varid'>id</span>
<a name="line-53"></a><span class='hs-definition'>setIdExported</span> <span class='hs-varid'>tv</span>	  	    	       <span class='hs-keyglyph'>=</span> <span class='hs-varid'>pprPanic</span> <span class='hs-str'>"setIdExported"</span> <span class='hs-layout'>(</span><span class='hs-varid'>ppr</span> <span class='hs-varid'>tv</span><span class='hs-layout'>)</span>
<a name="line-54"></a>
<a name="line-55"></a><a name="setIdNotExported"></a><span class='hs-definition'>setIdNotExported</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Id</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Id</span>
<a name="line-56"></a><span class='hs-comment'>-- ^ We can only do this to LocalIds</span>
<a name="line-57"></a><span class='hs-definition'>setIdNotExported</span> <span class='hs-varid'>id</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>ASSERT</span><span class='hs-layout'>(</span> <span class='hs-varid'>isLocalId</span> <span class='hs-varid'>id</span> <span class='hs-layout'>)</span> 
<a name="line-58"></a>                      <span class='hs-varid'>id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>LocalId</span> <span class='hs-conid'>NotExported</span> <span class='hs-layout'>}</span>
</pre>\end{code}

%************************************************************************
%*									*
\subsection{Predicates over variables}
%*									*
%************************************************************************

\begin{code}
<pre><a name="line-1"></a><a name="isTyVar"></a><span class='hs-definition'>isTyVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-2"></a><span class='hs-definition'>isTyVar</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>isTKVar</span>     <span class='hs-comment'>-- Historical</span>
<a name="line-3"></a>
<a name="line-4"></a><a name="isTKVar"></a><span class='hs-definition'>isTKVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>  <span class='hs-comment'>-- True of both type and kind variables</span>
<a name="line-5"></a><span class='hs-definition'>isTKVar</span> <span class='hs-layout'>(</span><span class='hs-conid'>TyVar</span> <span class='hs-layout'>{</span><span class='hs-layout'>}</span><span class='hs-layout'>)</span>   <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-6"></a><span class='hs-definition'>isTKVar</span> <span class='hs-layout'>(</span><span class='hs-conid'>TcTyVar</span> <span class='hs-layout'>{</span><span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-7"></a><span class='hs-definition'>isTKVar</span> <span class='hs-keyword'>_</span>            <span class='hs-keyglyph'>=</span> <span class='hs-conid'>False</span>
<a name="line-8"></a>
<a name="line-9"></a><a name="isTcTyVar"></a><span class='hs-definition'>isTcTyVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-10"></a><span class='hs-definition'>isTcTyVar</span> <span class='hs-layout'>(</span><span class='hs-conid'>TcTyVar</span> <span class='hs-layout'>{</span><span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-11"></a><span class='hs-definition'>isTcTyVar</span> <span class='hs-keyword'>_</span>            <span class='hs-keyglyph'>=</span> <span class='hs-conid'>False</span>
<a name="line-12"></a>
<a name="line-13"></a><a name="isId"></a><span class='hs-definition'>isId</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-14"></a><span class='hs-definition'>isId</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span><span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-15"></a><span class='hs-definition'>isId</span> <span class='hs-keyword'>_</span>       <span class='hs-keyglyph'>=</span> <span class='hs-conid'>False</span>
<a name="line-16"></a>
<a name="line-17"></a><a name="isLocalId"></a><span class='hs-definition'>isLocalId</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-18"></a><span class='hs-definition'>isLocalId</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>LocalId</span> <span class='hs-keyword'>_</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-19"></a><span class='hs-definition'>isLocalId</span> <span class='hs-keyword'>_</span>                            <span class='hs-keyglyph'>=</span> <span class='hs-conid'>False</span>
<a name="line-20"></a>
<a name="line-21"></a><a name="isLocalVar"></a><span class='hs-comment'>-- | 'isLocalVar' returns @True@ for type variables as well as local 'Id's</span>
<a name="line-22"></a><span class='hs-comment'>-- These are the variables that we need to pay attention to when finding free</span>
<a name="line-23"></a><span class='hs-comment'>-- variables, or doing dependency analysis.</span>
<a name="line-24"></a><span class='hs-definition'>isLocalVar</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-25"></a><span class='hs-definition'>isLocalVar</span> <span class='hs-varid'>v</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>not</span> <span class='hs-layout'>(</span><span class='hs-varid'>isGlobalId</span> <span class='hs-varid'>v</span><span class='hs-layout'>)</span>
<a name="line-26"></a>
<a name="line-27"></a><a name="isGlobalId"></a><span class='hs-definition'>isGlobalId</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-28"></a><span class='hs-definition'>isGlobalId</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>GlobalId</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-29"></a><span class='hs-definition'>isGlobalId</span> <span class='hs-keyword'>_</span>                           <span class='hs-keyglyph'>=</span> <span class='hs-conid'>False</span>
<a name="line-30"></a>
<a name="line-31"></a><a name="mustHaveLocalBinding"></a><span class='hs-comment'>-- | 'mustHaveLocalBinding' returns @True@ of 'Id's and 'TyVar's</span>
<a name="line-32"></a><span class='hs-comment'>-- that must have a binding in this module.  The converse</span>
<a name="line-33"></a><span class='hs-comment'>-- is not quite right: there are some global 'Id's that must have</span>
<a name="line-34"></a><span class='hs-comment'>-- bindings, such as record selectors.  But that doesn't matter,</span>
<a name="line-35"></a><span class='hs-comment'>-- because it's only used for assertions</span>
<a name="line-36"></a><span class='hs-definition'>mustHaveLocalBinding</span>	    <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-37"></a><span class='hs-definition'>mustHaveLocalBinding</span> <span class='hs-varid'>var</span> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>isLocalVar</span> <span class='hs-varid'>var</span>
<a name="line-38"></a>
<a name="line-39"></a><a name="isExportedId"></a><span class='hs-comment'>-- | 'isExportedIdVar' means \"don't throw this away\"</span>
<a name="line-40"></a><span class='hs-definition'>isExportedId</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Var</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span>
<a name="line-41"></a><span class='hs-definition'>isExportedId</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>GlobalId</span> <span class='hs-layout'>}</span><span class='hs-layout'>)</span>        <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-42"></a><span class='hs-definition'>isExportedId</span> <span class='hs-layout'>(</span><span class='hs-conid'>Id</span> <span class='hs-layout'>{</span> <span class='hs-varid'>idScope</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>LocalId</span> <span class='hs-conid'>Exported</span><span class='hs-layout'>}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>True</span>
<a name="line-43"></a><span class='hs-definition'>isExportedId</span> <span class='hs-keyword'>_</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>False</span>
</pre>\end{code}
</body>
</html>
